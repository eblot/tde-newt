#-----------------------------------------------------------------------------
# Newt System
#
# @file CMakeLists.txt
#-----------------------------------------------------------------------------

ADD_DEFINITIONS (-DCONSOLE_UART=0)
ADD_DEFINITIONS (-DCONSOLE_RTT=0)
ADD_DEFINITIONS (-DCONSOLE_INPUT=1)
ADD_DEFINITIONS (-DCONSOLE_ECHO=1)
ADD_DEFINITIONS (-DCONSOLE_COMPAT=1)
ADD_DEFINITIONS (-DCONSOLE_MAX_INPUT_LEN=256)
ADD_DEFINITIONS (-DCONSOLE_UART_BAUD=115200)
ADD_DEFINITIONS (-DCONSOLE_UART_FLOW_CONTROL=UART_FLOW_CTL_NONE)
ADD_DEFINITIONS (-DCONSOLE_UART_TX_BUF_SIZE=32)
ADD_DEFINITIONS (-DCONSOLE_UART_DEV="uart0")
ADD_DEFINITIONS (-DCONSOLE_DEFAULT_LOCK_TIMEOUT=1000)
ADD_DEFINITIONS (-DCONSOLE_SYSINIT_STAGE=20)

ADD_DEFINITIONS (-DFAULT_STUB=1)
ADD_DEFINITIONS (-DFAULT_CLI=0)
ADD_DEFINITIONS (-DFAULT_SYSINIT_STAGE=51)
ADD_DEFINITIONS (-DFAULT_MAX_DOMAINS=8)
ADD_DEFINITIONS (-DFAULT_DOMAIN_NAMES=0)

ADD_DEFINITIONS (-DSHELL_TASK=0)

ADD_DEFINITIONS (-DSHELL_CMD_ARGC_MAX=12)
ADD_DEFINITIONS (-DSHELL_CMD_HELP=1)
ADD_DEFINITIONS (-DSHELL_PROMPT_SUFFIX="> ")
ADD_DEFINITIONS (-DSHELL_MAX_MODULES=3)
ADD_DEFINITIONS (-DSHELL_MAX_CMD_QUEUED=2)
ADD_DEFINITIONS (-DSHELL_COMPAT=1)
ADD_DEFINITIONS (-DSHELL_MAX_COMPAT_COMMANDS=20)
ADD_DEFINITIONS (-DSHELL_COMPLETION=1)
ADD_DEFINITIONS (-DSHELL_NEWTMGR=0)

ADD_DEFINITIONS (-DSHELL_OS_MODULE=1)
ADD_DEFINITIONS (-DSHELL_OS_SERIAL_BOOT_NVREG=0)
ADD_DEFINITIONS (-DSHELL_PROMPT_MODULE=0)

ADD_DEFINITIONS (-DSHELL_SYSINIT_STAGE=500)

ADD_DEFINITIONS (-DSHELL_OS_DATETIME_CMD=3)

ADD_DEFINITIONS (-DSHELL_BRIDGE=0)
ADD_DEFINITIONS (-DSHELL_BRIDGE_MAX_IN_LEN=128)
ADD_DEFINITIONS (-DSHELL_BRIDGE_PRINTF_LEN=128)

ADD_DEFINITIONS (-DBOOT_SERIAL_NVREG_MAGIC=0xB7)

ADD_DEFINITIONS (-DBOOT_SERIAL_NVREG_INDEX=-1)

ADD_DEFINITIONS (-DSYSINIT_CONSTRAIN_INIT=1)
ADD_DEFINITIONS (-DSYSINIT_PANIC_FILE_LINE=0)
ADD_DEFINITIONS (-DSYSINIT_PANIC_MESSAGE=0)

use_sdk_headers (
  core/sys/fault
)

build_component_from (
  shell/src/shell.c
  shell/src/shell_bridge.c
  shell/src/shell_bridge_streamer.c
  # shell/src/shell_nlip.c
  shell/src/shell_os.c
  shell/src/shell_prompt.c
  sysinit/src/sysinit.c
  # console/minimal/src/console.c
  # console/minimal/src/rtt_console.c
  # console/minimal/src/uart_console.c
  fault/src/fault_stub.c
)

